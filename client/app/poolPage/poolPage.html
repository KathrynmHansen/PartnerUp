<div header></div>
<h2 class="errMsg" ng-show="error.length">{{error}}</h2>
<div class="poolPageBody" ng-show="!error.length">
<h1 class="poolTitle">{{currPool.name}}</h1>
<br>
<button class="partnerUpBtn" ng-hide="stuView" ng-click="startNewGrouping()">Organize New Grouping</button>
<div loading ng-show="loadingNewGrouping"></div>
<div class="newGrouping slide" ng-show="creatingGrouping && !loadingNewGrouping && !stuView">
  <input class="groupingName" ng-model="groupingName" placeholder="Enter title">
  <button class="reroll" ng-click="randomize()">Re-roll</button>
  <div id="partners" class='pair' unselectable="on" class="unselectable"> 
    <div class="Grid Grid--cell grp" ng-repeat="group in groups" ng-class="{clash: clashes.includes(group)}" >
      <div class="indPair Grid Grid--cell" ng-repeat="stu in group" class="stu"> 
        <img class='portrait Grid Grid--cell' src='{{stu.user.avatar_url}}' width='40px' height='50px'>
        <div class='Grid Grid--cell partnerName' ng-class="{selectedStu: selectedForSwap === stu, locked: lockedStus[stu.user.uid], clickable: !stuView}" ng-click="selectForSwap(stu)">{{stu.user.name}}</div>
        <img class='Grid Grid--cell lockBtn' src= "http://simpleicon.com/wp-content/uploads/lock-3.png" width='15px' height='15px' ng-show='lockedStus[stu.user.uid] === undefined' ng-click="toggleLockStu(stu)">
        <img class='Grid Grid--cell lockBtn' src= "http://image.flaticon.com/icons/svg/26/26053.svg" width='15px' height='15px' ng-show='lockedStus[stu.user.uid] !== undefined' ng-click="toggleLockStu(stu)">
      </div>
    </div>
  </div>
  <button class="finalize" ng-click="finalize()">Finalize Grouping</button>
</div>
<div loading ng-show="loading"></div>
<div class="history" ng-show="!loading">
  <h2>Past Groupings</h2>
  <input ng-model="searchHist" placeholder="Search groupings">
  <input ng-model="stuSearch" placeholder="Search for a student">
  <div class="pastGrouping" ng-repeat="grouping in pastGroupings | filter : filterGroupingsByName">
    <h3 class="groupingTitle">{{grouping.generationData.title}}</h3>
    <div unselectable="on" class="pair unselectable" id="pair">
      <div class="Grid Grid--cell grp" ng-repeat='grp in grouping.groups | filter : filterGroupsByName'>
        <div class="indPair Grid Grid--cell" ng-repeat='partner in grp'>
          <img class="portrait" src='{{idMap[partner].user.avatar_url}}' width='40px' height='50px'>
          {{idMap[partner].user.name}}
        </div>
      </div>
    </div>
    <button class="clipyclip histclip" data-clipboard-target="#pair">copy me</button>
  </div>
</div>
</div>