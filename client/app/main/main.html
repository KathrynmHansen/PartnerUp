<div ng-class="{toBackground: creatingGroup}">
  <h1 class="welcome">Hello, {{currentUser.name.includes("Gilbert") ? "Gilby" : currentUser.name || "Gilby"}}!</h1>
  <button class="signout" ng-click="signOut()">Log out</button>

  <!--Control buttons-->
  <div class="controls">
    <button ng-click="randomize(groupSizeSelect)">Partner Up!</button>
    <button ng-click="finalize()" ng-show="partnerUp && !finalized">Finalize this pairing</button>
    <div class="createButtons">
      <button ng-click="openCreateModal()">Create a group</button>
      <button ng-click="importFromMakerpass()">Import Groups from Makerpass</button>
    </div>
    <div>Current class: {{currentClass.name}}</div>
    <select ng-model="classSelect" ng-options="class as class.name for class in classes" ng-change="changeClass(classSelect)">
    </select>
    <div>Group Size: </div>
    <select ng-init="groupSizeSelect = 2" ng-model="groupSizeSelect">
      <option ng-repeat="idx in getIndexArray(8)">{{idx+2}}</option>
    </select>
    <button ng-click="seeHistory()" class="histBtn">See History</button>
  </div>

  <!--Lists of people in the current class-->
  <div class="instructorList">
    <h2>Instructors: </h2>
      <div class="instructor" ng-repeat="instructor in instructors">{{instructor.user.name}}</div>
  </div>
  <div class="fellowList">
    <h2>Fellows: </h2>
      <div class="fellow" ng-repeat="fellow in fellows">{{fellow.user.name}}</div>
  </div>
  <div class="studentList">
    <h2>Students: </h2> 
    <div class="student" ng-repeat="student in students"><button ng-click="removeFromStudent(student);">x</button>{{student.user.name}}</div>
  </div>
  <div>
    <h2>Removed Students:</h2>
    <div class ="removedStudents" ng-repeat="nopair in noPair"><button ng-click="addStudentBackIn(nopair);">o</button>{{nopair.user.name}}
    </div>
  </div>

  <!--The table of current groupings-->
  <div ng-show="partnerUp" class="studentGroups">
    <table>
      <tr>
      <th ng-repeat="index in getIndexArray(groupSizeSelect)">Partner {{index + 1}}</th>
      </tr>
      <tr ng-repeat="group in groups" ng-class="{clash: !finalized && clashes.includes(group), locked: searchLockedGroups(group)}" >
        <td ng-repeat="stu in group" ng-click="selectForSwap(stu)" ng-class="{selectedStu: selectedForSwap === stu}" class="stu"> <img src='{{stu.user.avatar_url}}' width='40px' height='50px'>
          {{stu.user.name}}
        </td>
        <td>
          <div class="lockBtn" ng-click="toggleLockGroup(group)">{{!searchLockedGroups(group) ? 'ðŸ”“' : 'ðŸ”’'}}</button>
        </td>
      </tr>
    </table>
  </div>

  <!--The modal for creating a group-->
  <div class="modal" ng-show="creatingGroup">
    <form>
      <label>Group Name: </label>
      <br>
      <input type="text" class="groupName" placeholder="(e.g. Physics 101, MKS46)" ng-model="groupName">
      <form class="addUsers">
        <br>
        <label>Name:</label>
        <br>
        <input type="text" class="userName" ng-model="inputName">
        <select class="roles" ng-model="inputRole" ng-options="role for role in roles">
        <input type="submit" value="Add User" class="submitUser" ng-click="addToUserList(inputName, inputRole)">
      </form>
      <table class="addedUsers">
        <tr>
          <th>Name:</th>
          <th>Role:</th>
        </tr>
        <tr ng-repeat="user in modalUserList">
          <td>{{user.user.name}}</td>
          <td>{{user.role}}</td>
        </tr>
      </table>
      <input type="submit" value="Create Group" class="submitGroup" ng-click="createClass(groupName, modalUserList)">
      <input type="submit" value="Cancel" class="cancel" ng-click="closeCreateModal()">
    </form>
  </div>
</div>